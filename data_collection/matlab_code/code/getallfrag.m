% start up Mongo
clc;
MongoStart;

% get fragments in chunks of 1 million, save them to a file and clear
all_fragments1 = getfragments('trackerdb.FragmentDownloaded', 0, 1000000);
save('allfragments1.mat');
clear;
all_fragments2 = getfragments('trackerdb.FragmentDownloaded', 1000000, 1000000);
save('allfragments2.mat');
clear;
all_fragments3 = getfragments('trackerdb.FragmentDownloaded', 2000000, 1000000);
save('allfragments3.mat');
clear;
all_fragments4 = getfragments('trackerdb.FragmentDownloaded', 3000000, 1000000);
save('allfragments4.mat');
clear;
all_fragments5 = getfragments('trackerdb.FragmentDownloaded', 4000000, 1000000);
save('allfragments5.mat');
clear;
all_fragments6 = getfragments('trackerdb.FragmentDownloaded', 5000000, 1000000);
save('allfragments6.mat');
clear;
all_fragments7 = getfragments('trackerdb.FragmentDownloaded', 6000000, 1000000);
save('allfragments7.mat');
clear;
all_fragments8 = getfragments('trackerdb.FragmentDownloaded', 7000000, 1000000);
save('allfragments8.mat');
clear;
all_fragments9 = getfragments('trackerdb.FragmentDownloaded', 8000000, 1000000);
save('allfragments9.mat');
clear;
all_fragments10 = getfragments('trackerdb.FragmentDownloaded', 9000000, 1000000);
save('allfragments10.mat');
clear;
all_fragments11 = getfragments('trackerdb.FragmentDownloaded', 10000000, 1000000);
save('allfragments11.mat');
clear;
all_fragments12 = getfragments('trackerdb.FragmentDownloaded', 11000000, 1000000);
save('allfragments12.mat');
clear;
all_fragments13 = getfragments('trackerdb.FragmentDownloaded', 12000000, 1000000);
save('allfragments13.mat');
clear;
all_fragments14 = getfragments('trackerdb.FragmentDownloaded', 13000000, 1000000);
save('allfragments14.mat');
clear;
all_fragments15 = getfragments('trackerdb.FragmentDownloaded', 14000000, 1000000);
save('allfragments15.mat');
clear;